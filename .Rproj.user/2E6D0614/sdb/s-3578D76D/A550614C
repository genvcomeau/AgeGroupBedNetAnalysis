{
    "collab_server" : "",
    "contents" : "Bed.Net<- read.csv(\"C:/Users/Genevieve/Documents/R/MalariaBedNetSubset.csv\")\nBed.Net.High<- subset(Bed.Net, Bed.Net$High >0)\nBed.Net.Low<- subset(Bed.Net, Bed.Net$Low >0)\nlibrary(dplyr)\nHHTotLow<-\n  group_by(Bed.Net.Low, HHNo) %>% slice(which.max(HHMNo))\nHHTotLow<- HHTotLow[,c(\"HHNo\", \"HHMNo\")]\nNetTotLow<-\n  group_by(Bed.Net.Low, HHNo) %>% slice(which.max(NETNO))\n#bad estimate of HHsize, replaced by LNNET+NoNet\nHHNetsHi<-\n  merge(HHTotHi, NetTotHi, by.x = \"HHNo\", by.y = \"HHNo\")\nHHNetsHi$Netspp<- HHNetsHi$NETNO/HHNetsHi$HHMNo\nNetuseHHLow<- \n  merge(LNNETLow, NoNetLow, by.x = \"HHNo\", by.y = \"HHNo\")\nNetuseHHLow$HHtot<- \n  NetuseHHLow$`(sum(LNNET))` + NetuseHHLow$`(sum(NoNet))`\n#New estimate of HHsize, takes greater of two methods\nHHNetsLow$HHMNo<- pmax(HHNetsLow$HHMNo, HHNetsLow$HHtot)\nHHNetsLow$pLNNET<- \n  (HHNetsLow$`(sum(LNNET))`/(HHNetsLow$`(sum(LNNET))`+HHNetsLow$`(sum(NoNet))`))\nBed.Net.High[c(\"HHMNo\", \"NETNO\", \"Netspp\", \"pLNNET\")]<- NA\n#IMPORTANT HHMNo, NETNO in by land data != OG, rep total\nmlm.Hi<- \n  merge(Bed.Net.High, HHNetsHi, by.x= \"HHNo\", by.y= \"HHNo\")\nmlm.Lo$MAL12<- sub(\"N\", 0, mlm.Lo$MAL12)\n\n  #below shows how R dummifies binomial vr (which is 0,1)\ncontrasts()\n\nlogit.Hi<-\n  glm(LNNET ~ Age + Pregnant + Sex + NETDF + SHRSLP+ \n  SLPSTRUCT + MAL12 + HHMNo.y + Netspp.y, \n      data = mlm.Hi, family = \"binomial\")\nsummary(logit.Hi)\nlogit.Lo<-\n  glm(LNNET ~ Age + Pregnant + Sex + NETDF + SHRSLP+ \n        SLPSTRUCT + MAL12 + HHMNo + Netspp, \n      data = mlm.Lo, family = \"binomial\", na.action= na.exclude)\nsummary(logit.Lo)\nlogit.sig.Hi<-\n  glm(LNNET ~ Age + Sex + NETDF + \n        SLPSTRUCT + HHMNo.y + Netspp.y, \n      data = mlm.Hi, family = \"binomial\")\nlogit.sig.Lo<-\n  glm(LNNET ~ Sex + NETDF + Netspp, \n      data = mlm.Lo, family = \"binomial\", na.action= na.exclude)\n#assessment of model fit\nwith(logit.sig.Hi, null.deviance - deviance)\nwith(logit.sig.Hi, df.null - df.residual)\nwith(logit.sig.Hi, pchisq(null.deviance - deviance, \n                df.null - df.residual, lower.tail = FALSE))\n#OR and CIs\nconfint.default(logit.sig.Hi)\nexp(cbind(OR = coef(logit.sig.Hi), confint(logit.sig.Hi)))\n#Predicted probabilities by age\npredicted.Hi.F.ND1.M1<- with(mlm.Hi,\n     data.frame(Age = as.numeric(factor(1:98)), Sex = factor(\"F\"), NETDF = factor(1), SLPSTRUCT = factor(1), HHMNo.y = 6.366133, Netspp.y = 0.4632654))\npredicted.Hi.M.ND1.M1<- with(mlm.Hi,\n                             data.frame(Age = as.numeric(factor(1:98)), Sex = factor(\"M\"), NETDF = factor(1), SLPSTRUCT = factor(1), HHMNo.y = 6.366133, Netspp.y = 0.4632654))\npredicted.Hi.ND1.M1<- rbind(predicted.Hi.F.ND1.M1, predicted.Hi.M.ND1.M1)\npredicted.Hi.F.ND1.M0<- with(mlm.Hi,\n                             data.frame(Age = as.numeric(factor(1:98)), Sex = factor(\"F\"), NETDF = factor(1), SLPSTRUCT = factor(0), HHMNo.y = 6.366133, Netspp.y = 0.4632654))\npredicted.Hi.M.ND1.M0<- with(mlm.Hi,\n                             data.frame(Age = as.numeric(factor(1:98)), Sex = factor(\"M\"), NETDF = factor(1), SLPSTRUCT = factor(0), HHMNo.y = 6.366133, Netspp.y = 0.4632654))\npredicted.Hi.ND1.M0<- rbind(predicted.Hi.F.ND1.M0, predicted.Hi.M.ND1.M0)\npredicted.Hi.F.ND0.M1<- with(mlm.Hi,\n                             data.frame(Age = as.numeric(factor(1:98)), Sex = factor(\"F\"), NETDF = factor(0), SLPSTRUCT = factor(1), HHMNo.y = 6.366133, Netspp.y = 0.4632654))\npredicted.Hi.M.ND0.M1<- with(mlm.Hi,\n                             data.frame(Age = as.numeric(factor(1:98)), Sex = factor(\"M\"), NETDF = factor(0), SLPSTRUCT = factor(1), HHMNo.y = 6.366133, Netspp.y = 0.4632654))\npredicted.Hi.ND0.M1<- rbind(predicted.Hi.F.ND0.M1, predicted.Hi.M.ND0.M1)\npredicted.Hi.F.ND0.M0<- with(mlm.Hi,\n                                data.frame(Age = as.numeric(factor(1:98)), Sex = factor(\"F\"), NETDF = factor(0), SLPSTRUCT = factor(0), HHMNo.y = 6.366133, Netspp.y = 0.4632654))\npredicted.Hi.M.ND0.M0<- with(mlm.Hi,\n                             data.frame(Age = as.numeric(factor(1:98)), Sex = factor(\"M\"), NETDF = factor(0), SLPSTRUCT = factor(0), HHMNo.y = 6.366133, Netspp.y = 0.4632654))\npredicted.Hi.ND0.M0<- rbind(predicted.Hi.F.ND0.M0, predicted.Hi.M.ND0.M0)\nlogit.sig.Lo.pp<-\n  glm(LNNET ~ Age + Sex + NETDF + Netspp, \n      data = mlm.Lo, family = \"binomial\", na.action= na.exclude)\npredicted.Lo.M.ND1<- with(mlm.Lo,\n                      data.frame(Age = as.numeric(factor(1:98)), Sex = \"M\", NETDF = factor(1), Netspp =0.5425858))\npredicted.Lo.F.ND1<- with(mlm.Lo,\n                        data.frame(Age = as.numeric(factor(1:98)), Sex = \"F\", NETDF = factor(1), Netspp = 0.5425858))\npredicted.Lo.ND1 <- rbind(predicted.Lo.F.ND1, predicted.Lo.M.ND1)\npredicted.Lo.M.ND0<- with(mlm.Lo,\n                     data.frame(Age = as.numeric(factor(1:98)), Sex = \"M\", NETDF = factor(0), Netspp =0.5425858))\npredicted.Lo.F.ND0<- with(mlm.Lo,\n                          data.frame(Age = as.numeric(factor(1:98)), Sex = \"F\", NETDF = factor(0), Netspp =0.5425858))\npredicted.Lo.ND0 <- rbind(predicted.Lo.F.ND0, predicted.Lo.M.ND0)\npredicted.Hi.ND1.M1$AgeP <- predict(logit.sig.Hi, newdata = predicted.Hi.ND1.M1, type = \"response\")\npredicted.Hi.ND1.M0$AgeP <- predict(logit.sig.Hi, newdata = predicted.Hi.ND1.M0, type = \"response\")\npredicted.Hi.ND0.M1$AgeP <- predict(logit.sig.Hi, newdata = predicted.Hi.ND0.M1, type = \"response\")\npredicted.Hi.ND0.M0$AgeP <- predict(logit.sig.Hi, newdata = predicted.Hi.ND0.M0, type = \"response\")\npredicted.Lo.ND1$AgeP <- predict(logit.sig.Lo.pp, newdata = predicted.Lo.ND1, type = \"response\")\npredicted.Lo.ND0$AgeP <- predict(logit.sig.Lo.pp, newdata = predicted.Lo.ND0, type = \"response\")\n#plotting\nggplot(predicted.Hi.ND1.M1, aes(x = Age, y = AgeP)) + geom_line(aes(colour = Sex), size=1)\n#agevsLNNET\nAgeppLNNET.Hi<- read.csv(\"C:/Users/Genevieve/Documents/R/AgeppLNNET.csv\")\nAgeppLNNET.Lo<- read.csv(\"C:/Users/Genevieve/Documents/R/AgeppLNNET.csv\")\n\ndummyppLNNET.Hi<- aggregate(mlm.Hi$LNNET, mlm.Hi[c(\"Age\", \"Age\")], FUN=mean, na.rm=T)\ndummyppLNNET.Lo<- aggregate(mlm.Lo$LNNET, mlm.Lo[c(\"Age\", \"Age\")], FUN=mean, na.rm=T)\nnames(dummyppLNNET.Hi)[names(dummyppLNNET.Hi)==\"x\"] <- \"ppLNNET\"\nnames(dummyppLNNET.Lo)[names(dummyppLNNET.Lo)==\"x\"] <- \"ppLNNET\"\n\nNetusebyAge.Hi<- ggplot(dummyppLNNET.Hi, aes(Age,ppLNNET)) + geom_point() + geom_smooth()\nNetusebyAge.Lo<- ggplot(dummyppLNNET.Lo, aes(Age,ppLNNET)) + geom_point() + geom_smooth()\ndev.copy(png,\"NetusebyAgeLo.png\",width=8,height=6,units=\"in\",res=100)\ndev.copy(png,\"NetusebyAgeHi.png\",width=8,height=6,units=\"in\",res=100)\n\nmlm.Hi$RDT<- as.numeric(as.character(mlm.Hi$RDT))\nmlm.Lo$RDT<- as.numeric(as.character(mlm.Lo$RDT))\nAgexRDT.Hi<- aggregate(mlm.Hi$RDT, mlm.Hi[c(\"Age\")], FUN=mean, na.rm=T)\nAgexRDT.Lo<- aggregate(mlm.Lo$RDT, mlm.Lo[c(\"Age\")], FUN=mean, na.rm=T)\nRDTbyAge.Hi<- ggplot(AgexRDT.Hi, aes(Age,x)) + geom_point() + geom_smooth()\ndev.copy(png,\"RDTbyAgeHi.png\",width=8,height=6,units=\"in\",res=100) dev.off()\nRDTbyAge.Lo<- ggplot(AgexRDT.Lo, aes(Age,x)) + geom_point() + geom_smooth()\ndev.copy(png,\"RDTbyAgeLo.png\",width=8,height=6,units=\"in\",res=100)\n\n#WHO BN Indicators\n(mlm.Hi$`(sum(NoNet))`> 0 && mlm.Hi$`(sum(LNNET))` < mlm.Hi$NETNO.y)\n(mlm.Lo$`(sum(NoNet))`> 0 && mlm.Lo$`(sum(LNNET))` < mlm.Lo$NETNO.y)\n\n#AgexRDTxLNNET comparison\nAgexRDTxNonuser_Hi <- \n  data.frame(\n    subset(mlm.Hi$Age, mlm.Hi$LNNET == 0), \n   subset(mlm.Hi$RDT, mlm.Hi$LNNET == 0))\n\n#Model reevaluation\n#determining interaction terms\nmean(mlm.Hi$Age[which(mlm.Hi$Sex == \"M\")])\nmean(mlm.Hi$Age[which(mlm.Hi$Sex == \"F\")], na.rm = TRUE)\nindepsexage.hi <- table(mlm.Hi$Sex, mlm.Hi$Age)\nchisq.test(indepsexage.hi[c(2,3),])\nfisher.test(indepsexage.hi,simulate.p.value=TRUE,B=1e7)\n#re-made mlm.Lo and saved as mlm.Lo2 because Sex got changed to all M somehow\nmean(mlm.Lo2$Age[which(mlm.Lo2$Sex == \"F\")], na.rm = TRUE)\nmean(mlm.Lo2$Age[which(mlm.Lo2$Sex == \"M\")], na.rm = TRUE)\nindepsexage.lo <- table(mlm.Lo2$Sex, mlm.Lo2$Age)\ntable(mlm.Hi$SLPSTRUCT, mlm.Hi$Sex)\nchisq.test(indepslpsex.hi[c(2,3), c(2,3)])\n#assigned mlm.Lo2$Sex to mlm.Lo$Sex\nindepNetsHHM.hi <- table(mlm.Hi$Netspp.y, mlm.Hi$HHMNo.y)\nchisq.test(indepNetsHHM.hi)\nindepNetsHHM.lo <- table(mlm.Lo$Netspp, mlm.Lo$HHMNo)\nchisq.test(indepNetsHHM.lo)\n#new model with interaction terms\nlogit.sig.Hi.interaction<-\n  glm(LNNET ~ Age + Sex + NETDF + \n        SLPSTRUCT + HHMNo.y + Netspp.y + \n        Netspp.y *HHMNo.y, \n      data = mlm.Hi, family = \"binomial\")\nsummary(logit.sig.Hi.interaction)\n\nlogit.sig.Lo.interaction<-\n  glm(LNNET ~ Age + Sex + NETDF + HHMNo + Netspp + \n        Netspp *HHMNo, \n      data = mlm.Lo, family = \"binomial\")\nsummary(logit.sig.Lo.interaction)\n\n#model validation and comparison\nwith(logit.sig.Hi.interaction, null.deviance - deviance)\nwith(logit.sig.Hi.interaction, df.null - df.residual)\nwith(logit.sig.Hi.interaction, pchisq(null.deviance - deviance, \n                          df.null - df.residual, lower.tail = FALSE))\n#reworking highland model predictions to include interaction term\npredicted.Hi.ND1.M1$AgeP.i <- predict(logit.sig.Hi.interaction, newdata = predicted.Hi.ND1.M1, type = \"response\")\npredicted.Hi.ND1.M0$AgeP.i <- predict(logit.sig.Hi.interaction, newdata = predicted.Hi.ND1.M0, type = \"response\")\npredicted.Hi.ND0.M1$AgeP.i <- predict(logit.sig.Hi.interaction, newdata = predicted.Hi.ND0.M1, type = \"response\")\npredicted.Hi.ND0.M0$AgeP.i <- predict(logit.sig.Hi.interaction, newdata = predicted.Hi.ND0.M0, type = \"response\")\n\n#Combining in a dataframe and graphing predictions\nPredicted.Probabilities.Hi <- data.frame(predicted.Hi.ND0.M0$Age, predicted.Hi.ND0.M0$Sex, \n                                         predicted.Hi.ND0.M0$AgeP.i, predicted.Hi.ND0.M1$AgeP.i\n                                         ,predicted.Hi.ND1.M0$AgeP.i, predicted.Hi.ND1.M1$AgeP.i)\nPredicted.Probabilities.Lo <- data.frame(predicted.Lo.ND0$Age, predicted.Lo.ND0$Sex, \n                                         predicted.Lo.ND0$AgeP, predicted.Lo.ND1$AgeP)\ncolnames(Predicted.Probabilities.Hi)[1] <- \"Age\"\ncolnames(Predicted.Probabilities.Hi)[2] <- \"Sex\"\ncolnames(Predicted.Probabilities.Hi)[3] <- \"No Diff, Not Main\"\ncolnames(Predicted.Probabilities.Hi)[4] <- \"No Diff, Main\"\ncolnames(Predicted.Probabilities.Hi)[5] <- \"Net Diff, Not Main\"\ncolnames(Predicted.Probabilities.Hi)[6] <- \"Net Diff, Main\"\ncolnames(Predicted.Probabilities.Lo)[1] <- \"Age\"\ncolnames(Predicted.Probabilities.Lo)[2] <- \"Sex\"\ncolnames(Predicted.Probabilities.Lo)[3] <- \"No Diff\"\ncolnames(Predicted.Probabilities.Lo)[4] <- \"Net Diff\"\n\nP.P.Hi.F <- Predicted.Probabilities.Hi[1:98,]\nP.P.Hi.M <- Predicted.Probabilities.Hi[99:196,]\nP.P.Lo.M <- Predicted.Probabilities.Lo[99:196,]\nP.P.Lo.F <- Predicted.Probabilities.Lo[1:98,]\n\nlibrary(reshape2)\nP.P.Hi.F.melted <- melt(P.P.Hi.F[,c(1,3,4,5,6)], id = \"Age\")\nP.P.Hi.M.melted <- melt(P.P.Hi.M[,c(1,3,4,5,6)], id = \"Age\")\nP.P.Lo.M.melted <- melt(P.P.Lo.M[,c(1,3,4)], id = \"Age\")\nP.P.Lo.F.melted <- melt(P.P.Lo.F[,c(1,3,4)], id = \"Age\")\n\nrequire(ggplot2)\nPredicted.Prob.Hi.All.M <-ggplot(P.P.Hi.M.melted,\n    aes(x = Age, y = value, color = variable)) +\n      geom_line() + ylim(0.5, 1.0) + ylab(\"Probability Slept Under Net Last Night\") \n\n\nPredicted.Prob.Hi.All.F <-ggplot(P.P.Hi.F.melted,\n    aes(x = Age, y = value, color = variable)) +\n  geom_line() + ylim(0.5, 1.0) + ylab(\"Probability Slept Under Net Last Night\") \n\n\nPredicted.Prob.Lo.All.M <-ggplot(P.P.Lo.M.melted,\n    aes(x = Age, y = value, color = variable)) +\n  geom_line() + ylim(0.7,1.0) + ylab(\"Probability Slept Under Net Last Night\") \n\n\nPredicted.Prob.Lo.All.F <-ggplot(P.P.Lo.F.melted,\n   aes(x = Age, y = value, color = variable)) +\n  geom_line() + ylim(0.7,1) + ylab(\"Probability Slept Under Net Last Night\") \n\n#making mean values\nland.mean.hi.f<- data.frame(P.P.Hi.F[,1], rowMeans(P.P.Hi.F[,3:6]))\nland.mean.hi.m<- data.frame(P.P.Hi.M[,1], rowMeans(P.P.Hi.M[,3:6]))\nland.mean.lo.m<- data.frame(P.P.Lo.M[,1], rowMeans(P.P.Lo.M[,3:4]))\nland.mean.lo.f<- data.frame(P.P.Lo.F[,1], rowMeans(P.P.Lo.F[,3:4]))\n\n\nAgeMeans<- read.csv(\"C:/Users/Genevieve/Documents/AgeGroupBedNetAnalysis/AgeMeans.csv\")\n\nP.P.Land.melted <- melt(AgeMeans[,c(1,6,7)], id = \"Age\")\nP.P.Land.Gender.melted <- melt(AgeMeans[,c(1,2,3,4,5)], id = \"Age\")\nP.P.Gender.melted <- melt(AgeMeans[,c(1,8,9)], id = \"Age\")\n\nPredicted.Prob.Land <-ggplot(P.P.Land.melted,\n                                 aes(x = Age, y = value, color = variable)) +\n  geom_line() + ylim(0.7,1.0) + ylab(\"Probability Slept Under Net Last Night\") \n\nPredicted.Prob.Land.Gender <-ggplot(P.P.Land.Gender.melted,\n                             aes(x = Age, y = value, color = variable)) +\n  geom_line() + ylim(0.7,1.0) + ylab(\"Probability Slept Under Net Last Night\") \n\nPredicted.Prob.Gender <-ggplot(P.P.Gender.melted,\n                             aes(x = Age, y = value, color = variable)) +\n  geom_line() + ylim(0.7,1.0) + ylab(\"Probability Slept Under Net Last Night\") \n\n#Age dummy variables\nBed.Net.High$Age0x1 <- ifelse(Bed.Net.High$Age == 1, 1,0)\nBed.Net.High$Age2x5 <- ifelse(Bed.Net.High$Age >= 2 & Bed.Net.High$Age <= 5, 1, 0)\nBed.Net.High$Age6x10 <- ifelse(Bed.Net.High$Age >= 6 & Bed.Net.High$Age <= 10, 1, 0)\nBed.Net.High$Age11x15 <- ifelse(Bed.Net.High$Age >= 11 & Bed.Net.High$Age <= 15, 1, 0)\nBed.Net.High$Age16x25 <- ifelse(Bed.Net.High$Age >= 16 & Bed.Net.High$Age <= 25, 1, 0)\nBed.Net.High$Age26x35 <- ifelse(Bed.Net.High$Age >= 26 & Bed.Net.High$Age <= 35, 1, 0)\nBed.Net.High$Age36x45 <- ifelse(Bed.Net.High$Age >= 36 & Bed.Net.High$Age <= 45, 1, 0)\nBed.Net.High$Age46x55 <- ifelse(Bed.Net.High$Age >= 46 & Bed.Net.High$Age <= 55, 1, 0)\nBed.Net.High$Age56x65 <- ifelse(Bed.Net.High$Age >= 56 & Bed.Net.High$Age <= 65, 1, 0)\nBed.Net.High$Age66 <- ifelse(Bed.Net.High$Age >= 66, 1, 0)\n\nBed.Net.Low$Age0x1 <- ifelse(Bed.Net.Low$Age == 1, 1,0)\nBed.Net.Low$Age2x5 <- ifelse(Bed.Net.Low$Age >= 2 & Bed.Net.Low$Age <= 5, 1, 0)\nBed.Net.Low$Age6x10 <- ifelse(Bed.Net.Low$Age >= 6 & Bed.Net.Low$Age <= 10, 1, 0)\nBed.Net.Low$Age11x15 <- ifelse(Bed.Net.Low$Age >= 11 & Bed.Net.Low$Age <= 15, 1, 0)\nBed.Net.Low$Age16x25 <- ifelse(Bed.Net.Low$Age >= 16 & Bed.Net.Low$Age <= 25, 1, 0)\nBed.Net.Low$Age26x35 <- ifelse(Bed.Net.Low$Age >= 26 & Bed.Net.Low$Age <= 35, 1, 0)\nBed.Net.Low$Age36x45 <- ifelse(Bed.Net.Low$Age >= 36 & Bed.Net.Low$Age <= 45, 1, 0)\nBed.Net.Low$Age46x55 <- ifelse(Bed.Net.Low$Age >= 46 & Bed.Net.Low$Age <= 55, 1, 0)\nBed.Net.Low$Age56x65 <- ifelse(Bed.Net.Low$Age >= 56 & Bed.Net.Low$Age <= 65, 1, 0)\nBed.Net.Low$Age66 <- ifelse(Bed.Net.Low$Age >= 66, 1, 0)\n\n#New mlm model\nmlm.Hi<- \n  merge(Bed.Net.High, HHNetsHi, by.x= \"HHNo\", by.y= \"HHNo\")\n\nmlm.Lo<- \n  merge(Bed.Net.Low, HHNetsLow, by.x= \"HHNo\", by.y= \"HHNo\", na.rm = TRUE)\n\nmlm.Lo$MAL12<- sub(\"N\", 0, mlm.Lo$MAL12)\n\n#redoing variables\nmlm.Hi$SLPSTRUC <- ifelse(mlm.Hi$SLPSTRUCT == \"main house\", 1, 0)\nmlm.Lo$SLPSTRUC <- ifelse(mlm.Lo$SLPSTRUCT == \"main house\", 1, 0)\n\nmlm.Hi$Pregnant <- ifelse(mlm.Hi$Pregnant == 1, 1, 0)\nmlm.Lo$Pregnant <- ifelse(mlm.Lo$Pregnant == 1, 1, 0)\n\nmlm.Hi$SHRSLP <- ifelse(mlm.Hi$SHRSLP == \"Y\", 1, 0)\nmlm.Lo$SHRSLP <- ifelse(mlm.Lo$SHRSLP == \"Y\", 1, 0)\n\nmlm.Hi$MAL12 <- ifelse(mlm.Hi$MAL12 == 1, 1, 0)\nmlm.Lo$MAL12 <- ifelse(mlm.Lo$MAL12 == 1, 1, 0)\n\nmlm.Hi$NETDF <- ifelse(mlm.Hi$NETDF == 1, 1, 0)\nmlm.Lo$NETDF <- ifelse(mlm.Lo$NETDF == 1, 1, 0)\n\nmlm.Hi$Sex <- ifelse(mlm.Hi$Sex == \"F\", 1, 0)\nmlm.Lo$Sex <- ifelse(mlm.Lo$Sex == \"F\", 1, 0)\n\nmlm.Hi$RDT <- ifelse(mlm.Hi$RDT == 1, 1, 0)\nmlm.Lo$RDT <- ifelse(mlm.Lo$RDT == 1, 1, 0)\n\nmlm.Lo <- mlm.Lo[ ! mlm.Lo$Netspp %in% c(\"Inf\"), ]\n\n#DK coded as no, underestimation\n\nlogit.Hi<-\n  glm(LNNET ~ Person.Under.5 + Pregnant + Sex + NETDF + SHRSLP+ \n        SLPSTRUC + MAL12 + HHMNo.y + Netspp.y + RDT + Age0x1 +\n         Age2x5 + Age6x10 + Age11x15 + Age16x25 + Age26x35\n      + Age36x45 + Age46x55 + Age56x65 + Age66, \n      data = mlm.Hi, family = \"binomial\", na.action = na.exclude)\nsummary(logit.Hi)\n\nlogit.Lo <-\n  glm(LNNET ~ Sex + Pregnant + NETDF + SHRSLP + RDT +\n        SLPSTRUC + MAL12 + HHMNo + Netspp + Age0x1 +\n        Age2x5 + Age6x10 + Age11x15 + Age16x25 + Age26x35\n      + Age36x45 + Age46x55 + Age56x65 + Age66, \n      data = mlm.Lo, family = \"binomial\", na.action = na.exclude)\nsummary(logit.Lo)\n\n#excluded Netspp\n\n#step-wise backwards elimination of nonsignificant variables, by least sig p value\n\n#High(in order of elim): Person under five, age2x5, age66, age46x55, shrslp, age56x65, pregnant, \n#age26x35, age36x45, Age0x1, MAL12, RDT(p = 0.08)\n\n#Low: age0x1, pregnant, age56x65, age26x35, mal12, slpstruc, shrslp, age66, age2x5, age46x55,\n#RDT, HHMNo, age35x46\n\nlogit.Hi<-\n  glm(LNNET ~ Sex + NETDF +\n        SLPSTRUC + HHMNo.y + Netspp.y +\n       Age6x10 + Age11x15 + Age16x25, \n      data = mlm.Hi, family = \"binomial\", na.action = na.exclude)\nsummary(logit.Hi)\n\nlogit.Lo <-\n  glm(LNNET ~ Sex + NETDF + Netspp + \n        Age6x10 + Age11x15 + Age16x25, \n      data = mlm.Lo, family = \"binomial\", na.action = na.exclude)\nsummary(logit.Lo)\n\n#CI and OR for reworked models\nconfint.default(logit.Hi)\nexp(cbind(OR = coef(logit.Hi), confint(logit.Hi)))\nconfint.default(logit.Lo)\nexp(cbind(OR = coef(logit.Lo), confint(logit.Lo)))\n\n\n                              ",
    "created" : 1469470859589.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2877431037",
    "id" : "A550614C",
    "lastKnownWriteTime" : 1479328787,
    "last_content_update" : 1479328787692,
    "path" : "~/AgeGroupBedNetAnalysis/AgeGroupMasterScript.R",
    "project_path" : "AgeGroupMasterScript.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}